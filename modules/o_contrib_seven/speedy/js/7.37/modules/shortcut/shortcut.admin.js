(function($){Drupal.behaviors.shortcutDrag={attach:function(context,settings){if(Drupal.tableDrag){var table=$("table#shortcuts"),visibleLength=0,slots=0,tableDrag=Drupal.tableDrag.shortcuts;$("> tbody > tr, > tr",table).filter(":visible").filter(":odd").filter(".odd").removeClass("odd").addClass("even").end().end().filter(":even").filter(".even").removeClass("even").addClass("odd").end().end().end().filter(".shortcut-slot-empty").each(function(index){if($(this).is(":visible")){visibleLength++}slots++});tableDrag.row.prototype.onSwap=function(swappedRow){var disabledIndex=$(table).find("tr").index($(table).find("tr.shortcut-status-disabled"))-slots-2,count=0;$(table).find("tr.shortcut-status-enabled").nextAll(":not(.shortcut-slot-empty)").each(function(index){if(index<disabledIndex){count++}});var total=slots-count;if(total==-1){var disabled=$(table).find("tr.shortcut-status-disabled");var changedRow=disabled.prevAll(":not(.shortcut-slot-empty)").not($(this.element)).get(0);disabled.after(changedRow);if($(changedRow).hasClass("draggable")){var changedRowObject=new tableDrag.row(changedRow,"mouse",false,0,true);changedRowObject.markChanged();tableDrag.rowStatusChange(changedRowObject)}}else if(total!=visibleLength){if(total>visibleLength){$(".shortcut-slot-empty:hidden:last").show();visibleLength++}else{$(".shortcut-slot-empty:visible:last").hide();visibleLength--}}};tableDrag.onDrop=function(){tableDrag.rowStatusChange(this.rowObject);return true};tableDrag.rowStatusChange=function(rowObject){var statusRow=$(rowObject.element).prevAll("tr.shortcut-status").get(0);var statusName=statusRow.className.replace(/([^ ]+[ ]+)*shortcut-status-([^ ]+)([ ]+[^ ]+)*/,"$2");var statusField=$("select.shortcut-status-select",rowObject.element);statusField.val(statusName)};tableDrag.restripeTable=function(){$("> tbody > tr:visible, > tr:visible",this.table).filter(":odd").filter(".odd").removeClass("odd").addClass("even").end().end().filter(":even").filter(".even").removeClass("even").addClass("odd")}}}};Drupal.behaviors.newSet={attach:function(context,settings){var selectDefault=function(){$(this).closest("form").find(".form-item-set .form-type-radio:last input").attr("checked","checked")};$("div.form-item-new input").focus(selectDefault).keyup(selectDefault)}}})(jQuery);