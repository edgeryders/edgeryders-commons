(function($){Drupal.behaviors.setTimezone={attach:function(context,settings){$("select.timezone-detect",context).once("timezone",function(){var dateString=Date();var matches=dateString.match(/\(([A-Z]{3,5})\)/);var abbreviation=matches?matches[1]:0;var dateNow=new Date;var offsetNow=dateNow.getTimezoneOffset()*-60;var dateJan=new Date(dateNow.getFullYear(),0,1,12,0,0,0);var dateJul=new Date(dateNow.getFullYear(),6,1,12,0,0,0);var offsetJan=dateJan.getTimezoneOffset()*-60;var offsetJul=dateJul.getTimezoneOffset()*-60;var isDaylightSavingTime;if(offsetJan==offsetJul){isDaylightSavingTime=""}else if(Math.max(offsetJan,offsetJul)==offsetNow){isDaylightSavingTime=1}else{isDaylightSavingTime=0}var path="system/timezone/"+abbreviation+"/"+offsetNow+"/"+isDaylightSavingTime;var element=this;$.ajax({async:false,url:settings.basePath,data:{q:path,date:dateString},dataType:"json",success:function(data){if(data){$(element).val(data)}}})})}}})(jQuery);